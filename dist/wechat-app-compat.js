!function(t,e){for(var n in e)t[n]=e[n]}(exports,function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e){class n{constructor(t,e){this.url=t,this.protocols="string"==typeof e?[e]:e,setTimeout(this.initWxWebsocket.bind(this),0)}get protocol(){return this.protocols?this.protocols[0]:null}initWxWebsocket(){this._wxWs=wx.connectSocket({url:this.url,protocols:this.protocols,fail:()=>{this.readyState=n.CLOSED}}),this.readyState=n.CONNECTING,this._wxWs.onOpen(this.makeOnOpen()),this._wxWs.onClose(this.makeOnClose()),this._wxWs.onError(this.makeOnError()),this._wxWs.onMessage(this.makeOnMessage())}close(t,e){this.readyState=n.CLOSING,this._wxWs.close(t,e)}send(t){this._wxWs.send({data:t})}makeOnOpen(){return()=>{console.log(`WebSocket connection opened for ${this.url}`),this.readyState=n.OPEN,this.onopen&&this.onopen.apply(null,arguments)}}makeOnClose(){return t=>{console.log(`WebSocket closed with result ${JSON.stringify(t)}`),this.readyState=n.CLOSED,this.onclose&&this.onlose.apply(null,arguments)}}makeOnError(){return t=>{console.error(t),this.onerror&&this.onerror.apply(null,arguments)}}makeOnMessage(){return this.onmessage}}n.OPEN=1,n.CLOSED=3,n.CLOSING=2,n.CONNECTING=0,t.exports=n},function(t,e,n){!function(e,n){t.exports=n()}(0,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};Object.defineProperty(e,"__esModule",{value:!0});var s={maxConcurrent:10,timeout:0,header:{},dataType:"json"},i=function(t){function e(e){void 0===e&&(e=s);var n=t.call(this)||this;return n.config=e,n.ctx="object"==typeof wx?wx:{request:function(){}},n.queue=[],n.runningTask=0,n.maxConcurrent=s.maxConcurrent,n.requestInterceptor=function(t){return!0},n.responseInterceptor=function(t,e){return!0},n.maxConcurrent=e.maxConcurrent,n}return r(e,t),e.prototype.create=function(t){return void 0===t&&(t=s),new e(t)},e.prototype.next=function(){var t=this,e=this.queue;if(e.length&&!(this.runningTask>=this.maxConcurrent)){var n=e.shift(),r=n.config,o=this.requestInterceptor,s=this.responseInterceptor;if(!0===o.call(this,r)){this.emit("request",r),this.runningTask=this.runningTask+1;var i={success:function(e){n.response=e,t.emit("success",r,e),!0!==s.call(t,r,e)?n.reject(e):n.resolve(e)},fail:function(e){n.response=e,t.emit("fail",r,e),!0!==s.call(t,r,e)?n.reject(e):n.resolve(e)},complete:function(){t.emit("complete",r,n.response),t.next(),t.runningTask=t.runningTask-1}},u=Object.assign(r,i);this.ctx.request(u)}else{n.reject({data:null,errMsg:"Request Interceptor: Request can't pass the Interceptor",statusCode:0,header:{}})}}},e.prototype.request=function(t,e,n,r,s){var i=this;void 0===n&&(n=""),void 0===r&&(r={}),void 0===s&&(s="json");var u={method:t,url:e,data:n,header:o({},r,this.config.header),dataType:s||this.config.dataType};return new Promise(function(t,e){var n={config:u,resolve:t,reject:e,response:null};i.queue.push(n),i.next()})},e.prototype.head=function(t,e,n,r){return this.request("HEAD",t,e,n,r)},e.prototype.options=function(t,e,n,r){return this.request("OPTIONS",t,e,n,r)},e.prototype.get=function(t,e,n,r){return this.request("GET",t,e,n,r)},e.prototype.post=function(t,e,n,r){return this.request("POST",t,e,n,r)},e.prototype.put=function(t,e,n,r){return this.request("PUT",t,e,n,r)},e.prototype.delete=function(t,e,n,r){return this.request("DELETE",t,e,n,r)},e.prototype.trace=function(t,e,n,r){return this.request("TRACE",t,e,n,r)},e.prototype.connect=function(t,e,n,r){return this.request("CONNECT",t,e,n,r)},e.prototype.setRequestInterceptor=function(t){return this.requestInterceptor=t,this},e.prototype.setResponseInterceptor=function(t){return this.responseInterceptor=t,this},e.prototype.clean=function(){this.queue=[]},e}(n(1).default);e.default=new i},function(t,e,n){!function(e,n){t.exports=n()}(0,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="@axetroy/event-emitter.js",o="__id__";function s(){return Math.random().toString(36).substr(2,16)}function i(t){return this.findIndex(function(e){return e[o]===t})}var u=Object.defineProperty;function c(){this[r]={},u&&u(this,r,{enumerable:!1,configurable:!1})}var a=c.prototype;a.constructor=c,a.on=function(t,e){var n=this[r],u=n[t]=n[t]||[],c=s(),a=void 0;return e[o]=c,u.push(e),function(){(a=i.call(u,c))>=0&&u.splice(a,1)}},a.off=function(t){this[r][t]=[]},a.clear=function(){this[r]={}},a.once=function(t,e){var n=this,u=n[r],c=u[t]=u[t]||[],a=s(),f=void 0,p=function(){(f=i.call(c,a))>=0&&c.splice(f,1),e.apply(n,arguments)};p[o]=a,c.push(p)},a.emit=function(){var t=this,e=[].slice.call(arguments),n=e.shift(),o=t[r];(o["*"]||[]).concat(o[n]||[]).map(function(r){return t.emitting(n,e,r)})},a.emitting=function(t,e,n){n.apply(this,e)},e.default=c}])})}])})},function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),s=n(1),i=n.n(s);function u(t){let e=t.header||{},n=t.config||{};return{ok:1==(t.statusCode/200|0),status:t.statusCode,statusText:t.errMsg,url:n.url,clone:()=>u(t),text:()=>Promise.resolve("string"==typeof t.data?t.data:JSON.stringify(t.data)),json:()=>{if("object"==typeof t.data)return Promise.resolve(t.data);let e={};try{e=JSON.parse(t.data)}catch(t){console.error(t)}return e},blob:()=>Promise.resolve(new Blob([t.data])),headers:{keys:()=>Object.keys(e),entries:()=>{let t=[];for(let n in e)t.push([n,e[n]]);return t},get:t=>e[t.toLowerCase()],has:t=>t.toLowerCase()in e}}}var c="function"==typeof fetch?fetch.bind():function(t,e){return e=e||{},i.a.request(e.method||"get",t,e.body,e.headers).then(t=>Promise.resolve(u(t))).catch(t=>Promise.reject(u(t)))};n.d(e,"fetch",function(){return a}),n.d(e,"WebSocket",function(){return f});const a=c,f=o.a}]));